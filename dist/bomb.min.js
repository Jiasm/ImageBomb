"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},_createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}();!function(t,i){i.Bomb=i.Bomb||t(i)}(function(t){function i(t,i){var o="";o+="<"+t;for(var n in i){var s=i[n];if("object"!==("undefined"==typeof s?"undefined":_typeof(s)))o+=" "+n+'="'+s+'" ';else{o+=" "+n+'=" ';for(var r in s){var a=s[r];o+=" "+r+": "+a+"; "}o+=' "'}}return o+="/>",e.innerHTML=o,e.removeChild(e.firstChild)}var e=document.createElement("div"),o=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?{x:50,y:50}:arguments[1];_classCallCheck(this,e),this.config=i,this.$img=t,this.setInfo(),this.buildMasks()}return _createClass(e,[{key:"setInfo",value:function(){var i=this.$img,e=t.getComputedStyle(this.$img);this.imgWidth=parseFloat(e.width),this.imgHeight=parseFloat(e.height),this.imgTop=parseFloat(i.offsetTop),this.imgLeft=parseFloat(i.offsetLeft),this.ammoWidth=this.imgWidth/this.config.x,this.ammoHeight=this.imgHeight/this.config.y}},{key:"buildMasks",value:function(){for(var t=this.ammoWidth,e=this.ammoHeight,o=this.config.x/2,n=this.config.y/2,s=document.createDocumentFragment(),r=0,a=this.config.x*this.config.y;a>r;r++){var h=r/this.config.x|0,f=r-h*this.config.x,c=h*e,l=f*t;s.appendChild(i("div",{"class":"bomb-mask bomb-"+(o>f?"left":"right")+" bomb-"+(n>h?"top":"bottom"),style:{width:t+"px",height:e+"px",top:c+"px",left:l+"px",background:"url("+this.$img.src+") no-repeat","background-size":this.imgWidth+"px "+this.imgHeight+"px","background-position":"-"+l+"px -"+c+"px",position:"absolute"}}))}this.$img.parentNode.appendChild(s),this.$img.style.display="none";var m=this;setTimeout(function(){m.bomb()},1e3)}},{key:"bomb",value:function(){for(var t=this.$img.parentNode,i=t.querySelectorAll(".bomb-mask"),e=this.imgWidth,o=this.imgHeight,n=0,s=i.length;s>n;n++){var r=i[n],a=(10*Math.random()|0)*e,h=(10*Math.random()|0)*o;r.classList.contains("bomb-left")&&(a=~a+1),r.classList.contains("bomb-top")&&(h=~h+1),r.setAttribute("style",r.getAttribute("style")+";transform: translate3d("+a+"px, "+h+"px, 0); opacity: 0; border-radius: 50%;")}}}]),e}();return o},window);